const $=e=>document.querySelector(e),$$=e=>document.querySelectorAll(e);let goalWord,goalChar0index,goalChar1index,goalChar2index,goalChar3index,goalChar4index,rowSize=5,moves=12,movesItTook=0,moveBonus=9,maxMoves=20,score=0,multiplier=1,bonusStreak=0,message="",guessWord="",isVictory=!1;function guess(){(guessWord=prompt("The word is...",""))&&(guessWord.toUpperCase()===goalWord?(isVictory=!0,evaluate()):(moves-=2,evaluate()),clearSelections())}function skip(){moves-=2,message="skipped",evaluate(),say(message),dealEm(),clearSelections()}function clearSelections(){$$(".selected").forEach(e=>e.classList.remove("selected"))}function getRandomLetter(){let e=Math.floor(Math.random()*letterBag.length);return letterBag.charAt(e)}function getRandomGridIndex(){return Math.floor(Math.random()*Math.pow(rowSize,2))}function setRandomGoalWord(){let e=Math.floor(Math.random()*words.length);goalWord=words[e].toUpperCase()}function setGoalCharIndexes(){for(goalChar0index=getRandomGridIndex();!goalChar1index||goalChar1index===goalChar0index;)goalChar1index=getRandomGridIndex();for(;!goalChar2index||goalChar2index===goalChar0index||goalChar2index===goalChar1index;)goalChar2index=getRandomGridIndex();for(;!goalChar3index||goalChar3index===goalChar0index||goalChar3index===goalChar1index||goalChar3index===goalChar2index;)goalChar3index=getRandomGridIndex();for(;!goalChar4index||goalChar4index===goalChar0index||goalChar4index===goalChar1index||goalChar4index===goalChar2index||goalChar4index===goalChar3index;)goalChar4index=getRandomGridIndex()}function setGridLetters(){$$(".cell").forEach((e,a)=>{let o=getRandomLetter();a===goalChar0index?o=goalWord.charAt(0):a===goalChar1index?o=goalWord.charAt(1):a===goalChar2index?o=goalWord.charAt(2):a===goalChar3index?o=goalWord.charAt(3):a===goalChar4index&&(o=goalWord.charAt(4));let t=goalWord.indexOf(o);e.innerText=o,e.dataset.piece=t+1})}function swap(e){e.classList.toggle("selected");let a=$$(".selected");if(a.length>=2){let e=a[0],o=a[1],t=e.parentElement,r=o.parentElement;t.appendChild(o),r.appendChild(e),e.classList.remove("selected"),o.classList.remove("selected"),colorize(),evaluate()}}function colorize(){document.querySelectorAll(".cell").forEach(e=>{let a,o,t=parseInt(e.parentElement.dataset.gridx),r=parseInt(e.parentElement.dataset.gridy),n=e.innerText,i=goalWord.charAt(0),l=goalWord.charAt(1),d=goalWord.charAt(2),s=goalWord.charAt(3),g=goalWord.charAt(4);o=0===t?null:(a=$(`[data-gridx="${t-1}"][data-gridy="${r}"] .cell`)).innerText,e.classList.remove("green","yellow"),o===i&&n===l||o===l&&n===d||o===d&&n===s||o===s&&n===g?(e.classList.add("green"),a.classList.add("green")):goalWord.indexOf(n)>-1&&goalWord.indexOf(o)>-1&&(e.classList.add("yellow"),a&&a.classList.add("yellow"))})}function evaluate(){for(i=0;i<5;i++){let e="";for(ii=0;ii<5;ii++)e+=$(`[data-gridy="${i}"][data-gridx="${ii}"] .cell`).innerText;if(e===goalWord){isVictory=!0;break}}isVictory?((moves+=moveBonus)>=maxMoves&&bonusStreak?(moves=maxMoves,message="bonus streak",multiplier+=.5+(bonusStreak+=bonusStreak)):moves>=maxMoves?(moves=maxMoves,bonusStreak++,message="bonus",multiplier++):(message="victory",multiplier=1,bonusStreak=0),score+=Math.round(500/movesItTook*multiplier),movesItTook=0,updateHUD(),say(message),dealEm()):(moves--,movesItTook++,updateHUD(),moves<1&&gameOver())}function say(e){$(".banner").classList.remove("hidden"),$(".banner-text-bottom").innerText=`* ${goalWord} *`,"bonus streak"===e?$(".banner-text-top").innerHTML=`ðŸ˜† BONUS STREAK ${bonusStreak}<span class="yellow-text">x ${multiplier}!</span>`:"bonus"===e&&($(".banner-text-top").innerHTML=`ðŸ˜€ BONUS <span class="yellow-text">x ${multiplier}!</span>`),"victory"===e&&($(".banner-text-top").innerHTML="Nice! ðŸ™‚"),"skipped"===e&&($(".banner-text-top").innerHTML="Skipped ðŸ˜£")}function updateHUD(){$(".moves").innerText=moves,$(".score").innerText=score,$(".multiplier").innerText=multiplier,movesItTook>=1&&$(".banner").classList.add("hidden")}function dealEm(){setRandomGoalWord(),setGoalCharIndexes(),setGridLetters(),colorize(),isVictory=!1,console.log(goalWord),console.log(goalChar0index,goalChar1index,goalChar2index,goalChar3index,goalChar4index)}function gameOver(){confirm(`GAME OVER\n    Final Score: ${$(".score").innerText}\n    \n    The word was "${goalWord}"\n    Play Again?`)&&startGame()}function startGame(){moves=10,score=0,updateHUD(),dealEm()}!function(){for(i=0;i<25;i++){let e=document.createElement("div"),a=document.createElement("button");e.dataset.gridx=i%rowSize,e.dataset.gridy=Math.floor(i/rowSize),e.classList.add("grid-item"),e.appendChild(a),a.classList.add("btn","cell"),a.addEventListener("click",e=>{swap(e.target)}),$(".grid").appendChild(e)}let e=document.createElement("button"),a=document.createElement("button");e.innerText="Skip",e.classList.add("btn","skip-btn"),e.addEventListener("click",skip),a.innerText="Guess",a.classList.add("btn","guess-btn"),a.addEventListener("click",guess),$(".grid").appendChild(e),$(".grid").appendChild(a)}(),startGame();